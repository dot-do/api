{"id":"api-18g","title":"Add webhook signature authentication for event sinks","description":"SECURITY: Webhook event sink at src/conventions/database/do.ts lines 274-280 sends events without authentication headers or signatures.\n\nTDD Steps:\n- RED: Write test verifying webhook requests have no auth\n- GREEN: Add HMAC signature header, support custom auth headers in config\n- REFACTOR: Document webhook verification process for consumers","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:33.119569-06:00","updated_at":"2026-01-24T22:05:43Z","external_ref":"gh-1"}
{"id":"api-3dm","title":"Remove unknown from Matcher union type in api.qa","description":"TYPESCRIPT: qa/src/types.ts Matcher type includes 'unknown' in the union which makes the entire union effectively unknown, breaking type narrowing.\n\nTDD Steps:\n- RED: Write test showing type narrowing doesn't work on Matcher\n- GREEN: Replace 'unknown' with branded LiteralMatcher type\n- REFACTOR: Add discriminated union pattern for all matcher types","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T15:40:33.037233-06:00","updated_at":"2026-01-24T16:04:32.109939-06:00","closed_at":"2026-01-24T16:04:32.109939-06:00","close_reason":"TDD implementation complete","external_ref":"gh-2"}
{"id":"api-54s","title":"Implement unified MCP tool registry pattern","description":"ARCHITECTURE: MCP tools are merged by mutating config objects in api.ts lines 85-104. Database and functions conventions each mount their own /mcp endpoint creating conflicts.\n\nTDD Steps:\n- RED: Write test showing tool registration from multiple conventions\n- GREEN: Create McpToolRegistry class with register/getTools methods, single /mcp endpoint\n- REFACTOR: Remove config mutation, use dependency injection for registry","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:30.792345-06:00","updated_at":"2026-01-24T16:04:32.073523-06:00","closed_at":"2026-01-24T16:04:32.073523-06:00","close_reason":"TDD implementation complete","external_ref":"gh-3"}
{"id":"api-5jy","title":"Remove insecure JWT fallback in auth middleware","description":"CRITICAL SECURITY: Auth middleware at src/middleware/auth.ts lines 60-69 decodes JWT payload WITHOUT signature verification as fallback. Any attacker can craft arbitrary claims.\n\nTDD Steps:\n- RED: Write test that crafts fake JWT with arbitrary claims, verify it's currently accepted\n- GREEN: Remove the fallback entirely OR require explicit 'trustUnverified: true' config\n- REFACTOR: Add logging when verification is skipped, document security implications","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-24T15:40:32.340539-06:00","updated_at":"2026-01-24T15:45:16.890287-06:00","closed_at":"2026-01-24T15:45:16.890287-06:00","close_reason":"Implemented TDD fix with tests","external_ref":"gh-4"}
{"id":"api-5zf","title":"Add unit tests for database convention","description":"TESTING: Database convention at src/conventions/database/ has 0% test coverage for schema parsing, DO operations, event sinks, MCP tools.\n\nTDD Steps:\n- RED: Write failing tests for: parseSchema(), parseField(), parseModel(), generateJsonSchema(), REST endpoints, MCP tool generation, event emission\n- GREEN: Ensure all tests pass\n- REFACTOR: Create comprehensive mock for DatabaseDO","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:37.851533-06:00","updated_at":"2026-01-24T15:56:18.911837-06:00","closed_at":"2026-01-24T15:56:18.911837-06:00","close_reason":"TDD implementation complete","external_ref":"gh-5"}
{"id":"api-6ni","title":"Add unit tests for rate limit middleware","description":"TESTING: Rate limit middleware at src/middleware/rateLimit.ts has 0% test coverage.\n\nTDD Steps:\n- RED: Write failing tests for: binding exists and limits, binding missing passes through, key derivation (user id vs IP vs anonymous), rate exceeded response\n- GREEN: Ensure all tests pass\n- REFACTOR: Add mock rate limiter helper to test utilities","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:36.958771-06:00","updated_at":"2026-01-24T15:56:18.928337-06:00","closed_at":"2026-01-24T15:56:18.928337-06:00","close_reason":"TDD implementation complete","external_ref":"gh-6"}
{"id":"api-6wt","title":"Add unit tests for testing convention","description":"TESTING: Testing convention at src/conventions/testing.ts has 0% test coverage. Ironic that the testing framework isn't tested.\n\nTDD Steps:\n- RED: Write failing tests for: test collection from MCP tools, REST endpoint test collection, /qa JSON-RPC endpoint, tests/list, examples/list, schemas/list, tests/run, tag filtering\n- GREEN: Ensure all tests pass\n- REFACTOR: Test the test infrastructure edge cases","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:35.204625-06:00","updated_at":"2026-01-24T15:49:47.187741-06:00","closed_at":"2026-01-24T15:49:47.187741-06:00","close_reason":"Comprehensive tests implemented"}
{"id":"api-91d","title":"Replace unsafe type assertions with proper types","description":"TYPESCRIPT: Multiple unsafe patterns throughout codebase:\n- 'as never' in response.ts line 40\n- 'as unknown' double assertions in context.ts line 9\n- Catching exceptions and casting to Error without checking\n\nTDD Steps:\n- RED: Enable stricter linting for type assertions\n- GREEN: Replace each unsafe assertion with proper type guards or narrowing\n- REFACTOR: Add ESLint rule @typescript-eslint/no-unsafe-type-assertion","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:32.098014-06:00","updated_at":"2026-01-24T15:56:18.960021-06:00","closed_at":"2026-01-24T15:56:18.960021-06:00","close_reason":"TDD implementation complete"}
{"id":"api-dju","title":"Add unit tests for RPC convention","description":"TESTING: RPC convention at src/conventions/rpc.ts has 0% test coverage.\n\nTDD Steps:\n- RED: Write failing tests for: method listing, method execution via binding, nested method paths (a.b.c), unknown method error, whitelist validation\n- GREEN: Ensure all tests pass\n- REFACTOR: Add integration tests with mock bindings","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:33.989235-06:00","updated_at":"2026-01-24T22:05:46Z","external_ref":"gh-9"}
{"id":"api-dv4","title":"Add noUncheckedIndexedAccess to tsconfig","description":"TYPESCRIPT: tsconfig.json is missing noUncheckedIndexedAccess which allows unsafe array/object access without undefined checks.\n\nTDD Steps:\n- RED: Add the flag, observe type errors throughout codebase\n- GREEN: Fix all type errors by adding proper undefined checks\n- REFACTOR: Consider adding other strict flags (exactOptionalPropertyTypes, noPropertyAccessFromIndexSignature)","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:30.174048-06:00","updated_at":"2026-01-24T22:05:47Z","external_ref":"gh-10"}
{"id":"api-ebm","title":"Add path validation to prevent SSRF in proxy convention","description":"SECURITY: Proxy convention at src/conventions/proxy.ts lines 7-17 allows arbitrary path manipulation without validation. Could allow access to internal services.\n\nTDD Steps:\n- RED: Write test attempting directory traversal (/../internal) and absolute path injection\n- GREEN: Add path normalization, block .. sequences, validate against allowed paths\n- REFACTOR: Extract path validation to reusable utility","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-24T15:40:33.211345-06:00","updated_at":"2026-01-24T15:45:16.905635-06:00","closed_at":"2026-01-24T15:45:16.905635-06:00","close_reason":"Implemented TDD fix with tests"}
{"id":"api-epa","title":"Add schema validation for database convention inputs","description":"SECURITY: Database convention at src/conventions/database/index.ts lines 86-97 parses request body without validation against the parsed schema.\n\nTDD Steps:\n- RED: Write test sending invalid/malicious data that doesn't match schema\n- GREEN: Validate incoming data against generateJsonSchema() before database operations\n- REFACTOR: Create reusable validation middleware, integrate with Zod or similar","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-24T15:40:34.524968-06:00","updated_at":"2026-01-24T15:49:47.143268-06:00","closed_at":"2026-01-24T15:49:47.143268-06:00","close_reason":"Comprehensive tests implemented"}
{"id":"api-h2r","title":"Fix duplicate type definitions","description":"TYPESCRIPT: Several types are defined in multiple places:\n- TestingConfig: src/types.ts, src/conventions/testing.ts, qa/src/types.ts\n- EventSinkConfig: src/types.ts, src/conventions/database/types.ts\n\nTDD Steps:\n- RED: Write test importing types from multiple locations, verify they diverge\n- GREEN: Consolidate to single source of truth, re-export from other locations\n- REFACTOR: Add lint rule to prevent duplicate type definitions","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-24T15:40:31.09578-06:00","updated_at":"2026-01-24T16:04:32.128424-06:00","closed_at":"2026-01-24T16:04:32.128424-06:00","close_reason":"TDD implementation complete"}
{"id":"api-rbp","title":"Fix SQL injection vulnerability in CRUD convention","description":"CRITICAL SECURITY: Column names from Object.keys(body) are interpolated directly into SQL queries without validation in src/conventions/crud.ts lines 20-30, 106, 129.\n\nTDD Steps:\n- RED: Write test that attempts SQL injection via column name (e.g., 'name; DROP TABLE users--')\n- GREEN: Add column name whitelist validation, reject non-alphanumeric column names\n- REFACTOR: Extract SQL sanitization to shared helper","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-24T15:40:31.062698-06:00","updated_at":"2026-01-24T15:45:16.87492-06:00","closed_at":"2026-01-24T15:45:16.87492-06:00","close_reason":"Implemented TDD fix with tests","external_ref":"gh-14"}
{"id":"api-yq7","title":"Add unit tests for MCP convention","description":"TESTING: MCP convention at src/conventions/mcp.ts has 0% test coverage.\n\nTDD Steps:\n- RED: Write failing tests for: initialize, tools/list, tools/call, resources/list, resources/read, unknown method error, tool handler execution, test/example exposure\n- GREEN: Ensure all tests pass (implementation exists, just needs tests)\n- REFACTOR: Extract test helpers, add edge case tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:33.187606-06:00","updated_at":"2026-01-24T15:49:47.157727-06:00","closed_at":"2026-01-24T15:49:47.157727-06:00","close_reason":"Comprehensive tests implemented"}
{"id":"api-z0e","title":"Add global error boundary middleware","description":"ARCHITECTURE: No global error handling - errors bubble up unhandled. Empty catch blocks in auth.ts and rpc.ts hide errors.\n\nTDD Steps:\n- RED: Write test that throws error in handler, verify unhandled\n- GREEN: Add errorMiddleware() that catches all errors, returns consistent error envelope\n- REFACTOR: Replace empty catch blocks with proper error logging, add error codes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:32.320021-06:00","updated_at":"2026-01-24T15:56:18.943684-06:00","closed_at":"2026-01-24T15:56:18.943684-06:00","close_reason":"TDD implementation complete"}
{"id":"api-zn5","title":"Add unit tests for auth middleware","description":"TESTING: Auth middleware at src/middleware/auth.ts has 0% test coverage. Security-critical code.\n\nTDD Steps:\n- RED: Write failing tests for: mode=none allows all, mode=required blocks no token, mode=optional allows no token, snippet trust headers, JWT verification, user info extraction, invalid token rejection\n- GREEN: Ensure all tests pass\n- REFACTOR: Add tests for edge cases (malformed tokens, expired tokens)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-24T15:40:36.27303-06:00","updated_at":"2026-01-24T15:49:47.127818-06:00","closed_at":"2026-01-24T15:49:47.127818-06:00","close_reason":"Comprehensive tests implemented"}
{"id":"api-zqt","title":"Split functions convention into sub-modules","description":"ARCHITECTURE: src/conventions/functions/index.ts is 986 lines handling 6 different patterns (actions, proxies, packages, mashups, lookups, pipelines). Should be split.\n\nTDD Steps:\n- RED: Write integration tests for each pattern type that currently pass\n- GREEN: Extract each pattern to its own file (actions.ts, proxies.ts, packages.ts, mashups.ts, lookups.ts, pipelines.ts)\n- REFACTOR: Create shared utilities, ensure no circular dependencies","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-24T15:40:29.875268-06:00","updated_at":"2026-01-24T16:04:32.092629-06:00","closed_at":"2026-01-24T16:04:32.092629-06:00","close_reason":"TDD implementation complete"}